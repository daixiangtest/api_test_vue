"use strict";(self["webpackChunkapi_test_vue"]=self["webpackChunkapi_test_vue"]||[]).push([[409],{2469:function(e,l,t){t.d(l,{N:function(){return s}});var a=t(2261),u=t(1552);const s=(0,a.nY)("proStore",{state:()=>({pro:{},env_list:[],env:0,inetrfaces:[],sceneList:[],taskList:[]}),getters:{interface1(){return this.inetrfaces.filter((e=>"1"===e.type))},interface2(){return this.inetrfaces.filter((e=>"2"===e.type))}},actions:{async getInterFaces(){const e=await u.A.getInterFaces(this.pro.id);200===e.status?this.inetrfaces=e.data:console.log(`获取项目id${this.pro.id}失败`)},async getScenes(){const e=await u.A.getScenes(this.pro.id);200===e.status&&(this.sceneList=e.data)},async getTestTask(){const e=await u.A.getTestTaskList(this.pro.id);200===e.status&&(this.taskList=e.data)}},persist:{enabled:!0,strategies:{key:"users",storage:localStorage}}})},2213:function(e,l,t){t.d(l,{A:function(){return L}});var a=t(6768),u=t(4232),s=t(5130),n=t(144),o=t(3923);const i={class:"icon-ele"},d={class:"icon-ele"},r={class:"icon-ele"},c={style:{"overflow-x":"auto"}},g={key:0,style:{color:"green"}},b={key:1,style:{color:"brown"}},p={key:2},_={key:0,style:{color:"green"}},k={key:1,style:{color:"slategray"}},v={key:2,style:{color:"yellow"}},f={key:3,style:{color:"brown"}},m={key:4},y={key:0,style:{"margin-top":"10px",width:"100%","text-align":"center"}},F={class:"dialog-footer"};var h={__name:"ResultView",props:{result:{},hideBtn:!1},setup(e){const l=e,t=(0,n.KR)(!1),h=(0,n.Kh)({project:null,interface:null,desc:"",info:"",status:"未处理"});async function w(){h.project=proStores.pro.id,h.info=l.result;const e=await api.addBug(h);201===e.status&&(ElNotification({type:"success",title:"bug提交成功",duration:1e3}),t.value=!1)}return(l,n)=>{const W=(0,a.g2)("el-tab-pane"),L=(0,a.g2)("el-tag"),C=(0,a.g2)("el-collapse-item"),B=(0,a.g2)("el-collapse"),X=(0,a.g2)("el-tabs"),E=(0,a.g2)("el-button"),x=(0,a.g2)("el-option"),V=(0,a.g2)("el-select"),A=(0,a.g2)("el-form-item"),R=(0,a.g2)("el-input"),z=(0,a.g2)("el-form"),I=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(X,{type:"border-card"},{default:(0,a.k6)((()=>[(0,a.bF)(W,{label:"响应体"},{default:(0,a.k6)((()=>[(0,a.bF)(o.A,{modelValue:e.result.response_body,"onUpdate:modelValue":n[0]||(n[0]=l=>e.result.response_body=l),height:"200px",lang:"json",readOnly:"True"},null,8,["modelValue"])])),_:1}),(0,a.bF)(W,{label:"响应头"},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.result.response_header,((e,l)=>((0,a.uX)(),(0,a.CE)("div",null,[(0,a.bF)(L,{type:"primary"},{default:(0,a.k6)((()=>[(0,a.eW)((0,u.v_)(l),1)])),_:2},1024),n[6]||(n[6]=(0,a.Lk)("span",null,":",-1)),(0,a.bF)(L,{type:"success"},{default:(0,a.k6)((()=>[(0,a.eW)((0,u.v_)(e),1)])),_:2},1024)])))),256))])),_:1}),(0,a.bF)(W,{label:"请求信息"},{default:(0,a.k6)((()=>[(0,a.bF)(B,null,{default:(0,a.k6)((()=>[(0,a.bF)(C,{title:"General",name:"1"},{icon:(0,a.k6)((({isActive:e})=>[(0,a.Lk)("span",i,(0,u.v_)(e?"关闭":"展开"),1)])),default:(0,a.k6)((()=>[(0,a.Lk)("div",null,[(0,a.bF)(L,{type:"success"},{default:(0,a.k6)((()=>n[7]||(n[7]=[(0,a.eW)("RequestMethod: ")]))),_:1}),(0,a.bF)(L,{type:"danger"},{default:(0,a.k6)((()=>[(0,a.eW)((0,u.v_)(e.result.method),1)])),_:1})]),(0,a.Lk)("div",null,[(0,a.bF)(L,{type:"success"},{default:(0,a.k6)((()=>n[8]||(n[8]=[(0,a.eW)("RequestUrl: ")]))),_:1}),(0,a.bF)(L,{type:"danger"},{default:(0,a.k6)((()=>[(0,a.eW)((0,u.v_)(e.result.url),1)])),_:1})])])),_:1}),(0,a.bF)(C,{title:"Request Header",name:"2"},{icon:(0,a.k6)((({isActive:e})=>[(0,a.Lk)("span",d,(0,u.v_)(e?"关闭":"展开"),1)])),default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.result.response_header,((e,l)=>((0,a.uX)(),(0,a.CE)("div",null,[(0,a.bF)(L,{type:"success"},{default:(0,a.k6)((()=>[(0,a.eW)((0,u.v_)(l)+": ",1)])),_:2},1024),(0,a.bF)(L,{type:"danger"},{default:(0,a.k6)((()=>[(0,a.eW)((0,u.v_)(e),1)])),_:2},1024)])))),256))])),_:1}),(0,a.bF)(C,{title:"Request Body",name:"3"},{icon:(0,a.k6)((({isActive:e})=>[(0,a.Lk)("span",r,(0,u.v_)(e?"关闭":"展开"),1)])),default:(0,a.k6)((()=>[(0,a.Lk)("div",null,[(0,a.bF)(L,{type:"danger"},{default:(0,a.k6)((()=>[(0,a.eW)((0,u.v_)(e.result.requests_body),1)])),_:1})])])),_:1})])),_:1})])),_:1}),(0,a.bF)(W,{label:"日志"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",c,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.result.log_data,(e=>((0,a.uX)(),(0,a.CE)("div",null,["INFO"===e[0]?((0,a.uX)(),(0,a.Wv)(L,{key:0,type:"success"},{default:(0,a.k6)((()=>[(0,a.eW)((0,u.v_)(e[0])+":"+(0,u.v_)(e[1]),1)])),_:2},1024)):"DEBUG"===e[0]?((0,a.uX)(),(0,a.Wv)(L,{key:1,type:"info"},{default:(0,a.k6)((()=>[(0,a.eW)((0,u.v_)(e[0])+":"+(0,u.v_)(e[1]),1)])),_:2},1024)):"ERROR"===e[0]?((0,a.uX)(),(0,a.Wv)(L,{key:2,type:"danger"},{default:(0,a.k6)((()=>[(0,a.eW)((0,u.v_)(e[0])+":"+(0,u.v_)(e[1]),1)])),_:2},1024)):((0,a.uX)(),(0,a.Wv)(L,{key:3,type:"warning"},{default:(0,a.k6)((()=>[(0,a.eW)((0,u.v_)(e[0])+":"+(0,u.v_)(e[1]),1)])),_:2},1024))])))),256))])])),_:1}),(0,a.bF)(W,{disabled:""},{label:(0,a.k6)((()=>["成功"===e.result.state?((0,a.uX)(),(0,a.CE)("span",g,"Assert:"+(0,u.v_)(e.result.state),1)):"错误"===e.result.state?((0,a.uX)(),(0,a.CE)("span",b,"Assert:"+(0,u.v_)(e.result.state),1)):((0,a.uX)(),(0,a.CE)("span",p,"Assert:"+(0,u.v_)(e.result.state),1))])),_:1}),(0,a.bF)(W,{disabled:""},{label:(0,a.k6)((()=>[200<=e.result.status_cede&&e.result.status_cede<300?((0,a.uX)(),(0,a.CE)("span",_,"code:"+(0,u.v_)(e.result.status_cede),1)):300<=e.result.status_cede&&e.result.status_cede<400?((0,a.uX)(),(0,a.CE)("span",k,"code:"+(0,u.v_)(e.result.status_cede),1)):400<=e.result.status_cede&&e.result.status_cede<500?((0,a.uX)(),(0,a.CE)("span",v,"code:"+(0,u.v_)(e.result.status_cede),1)):500<=e.result.status_cede&&e.result.status_cede<600?((0,a.uX)(),(0,a.CE)("span",f,"code:"+(0,u.v_)(e.result.status_cede),1)):((0,a.uX)(),(0,a.CE)("span",m,"code:"+(0,u.v_)(e.result.status_cede),1))])),_:1}),(0,a.bF)(W,{disabled:""},{label:(0,a.k6)((()=>[(0,a.eW)(" Time:"+(0,u.v_)(e.result.run_time),1)])),_:1})])),_:1}),"失败"===e.result.state?((0,a.uX)(),(0,a.CE)("div",y,[(0,a.bo)((0,a.bF)(E,{onClick:n[1]||(n[1]=e=>t.value=!0),plain:"",size:"small"},{default:(0,a.k6)((()=>[(0,a.eW)("提交bug"+(0,u.v_)(l.showbBtn),1)])),_:1},512),[[s.aG,!e.hideBtn]])])):(0,a.Q3)("",!0),(0,a.bF)(I,{title:"提交bug",modelValue:t.value,"onUpdate:modelValue":n[5]||(n[5]=e=>t.value=e),width:"30%"},{footer:(0,a.k6)((()=>[(0,a.Lk)("div",F,[(0,a.bF)(E,{size:"small",onClick:n[4]||(n[4]=e=>t.value=!1)},{default:(0,a.k6)((()=>n[9]||(n[9]=[(0,a.eW)("取 消")]))),_:1}),(0,a.bF)(E,{size:"small",type:"primary",plain:"",onClick:w},{default:(0,a.k6)((()=>n[10]||(n[10]=[(0,a.eW)("确 定")]))),_:1})])])),default:(0,a.k6)((()=>[(0,a.bF)(z,{model:h},{default:(0,a.k6)((()=>[(0,a.bF)(A,{label:"所属接口"},{default:(0,a.k6)((()=>[(0,a.bF)(V,{size:"small",modelValue:h.interface,"onUpdate:modelValue":n[2]||(n[2]=e=>h.interface=e),placeholder:"bug对应的接口",style:{width:"100%"}},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.interfaces,(e=>((0,a.uX)(),(0,a.Wv)(x,{label:e.name+" "+e.url,value:e.id,key:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,a.bF)(A,{label:"bug描述"},{default:(0,a.k6)((()=>[(0,a.bF)(R,{autosize:{minRows:3,maxRows:4},modelValue:h.desc,"onUpdate:modelValue":n[3]||(n[3]=e=>h.desc=e),type:"textarea",autocomplete:"off"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])],64)}}},w=t(1241);const W=(0,w.A)(h,[["__scopeId","data-v-520d49ff"]]);var L=W},2409:function(e,l,t){t.r(l),t.d(l,{default:function(){return h}});var a=t(6768),u=t(144),s=t(4232),n=t(5710),o=t(37),i=t(1552),d=t(2469),r=t(2213),c=t(1219);const g={class:"card page-box"},b={class:"card",style:{"margin-top":"10px",padding:"10px"}},p={style:{"text-align":"right"}},_={style:{"margin-top":"10px"}},k={style:{"margin-top":"10px"}},v={style:{"margin-top":"10px"}},f={class:"dialog-footer"};var m={__name:"BugsView",setup(e){const l=(0,u.Kh)({showBug:!1,bugInfo:null,bugLogs:null,updateBugDlg:!1,updateBugForm:{}}),t=(0,d.N)();let m=(0,u.KR)([]),y=(0,u.KR)([]);async function F(){const e=await i.A.getBugs(t.pro.id);200===e.status&&(m.value=e.data,C())}const h=(0,a.EW)((()=>{let e=m.value.filter((e=>"未处理"===e.status));return e})),w=(0,a.EW)((()=>m.value.filter((e=>"处理中"===e.status)))),W=(0,a.EW)((()=>m.value.filter((e=>"处理完"===e.status)))),L=(0,a.EW)((()=>m.value.filter((e=>"无效bug"===e.status))));function C(){const e=document.querySelector("#chart1Box"),l=[m.value.length,W.value.length,w.value.length,h.value.length,L.value.length],t=["bug总数","处理完","处理中","未处理","无效bug"];o.A.chart1(e,l,t);const a=document.querySelector("#chart2Box");o.A.chart2(a,[{value:W.value.length,name:"处理完"},{value:w.value.length,name:"开发处理中"},{value:h.value.length,name:"未处理"},{value:L.value.length,name:"无效bug"}])}async function B(e){l.bugInfo=e;const t=await i.A.getBugData(e.id);200===t.status&&(l.bugLogs=t.data),l.showBug=!0}async function X(){const e=await i.A.updateBug(l.updateBugForm.id,l.updateBugForm);200===e.status&&((0,c.nk)({type:"success",message:"修改成功",duration:1e3}),F(),l.updateBugDlg=!1)}return(0,a.sV)((async()=>{await F(),y.value=m.value})),(e,t)=>{const o=(0,a.g2)("el-col"),i=(0,a.g2)("el-row"),d=(0,a.g2)("el-button"),c=(0,a.g2)("el-badge"),F=(0,a.g2)("el-table-column"),C=(0,a.g2)("el-tooltip"),E=(0,a.g2)("el-table"),x=(0,a.g2)("el-descriptions-item"),V=(0,a.g2)("el-descriptions"),A=(0,a.g2)("el-card"),R=(0,a.g2)("el-timeline-item"),z=(0,a.g2)("el-timeline"),I=(0,a.g2)("el-empty"),K=(0,a.g2)("el-scrollbar"),D=(0,a.g2)("el-drawer"),T=(0,a.g2)("el-option"),U=(0,a.g2)("el-select"),q=(0,a.g2)("el-form-item"),S=(0,a.g2)("el-form"),N=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",g,[t[16]||(t[16]=(0,a.Lk)("span",{class:"el-icon-s-data",style:{color:"#17abe3"}},[(0,a.Lk)("b",null,"bug统计")],-1)),(0,a.bF)(i,{gutter:10},{default:(0,a.k6)((()=>[(0,a.bF)(o,{span:12},{default:(0,a.k6)((()=>t[9]||(t[9]=[(0,a.Lk)("div",{class:"chartBox",id:"chart1Box"},null,-1)]))),_:1}),(0,a.bF)(o,{span:12},{default:(0,a.k6)((()=>t[10]||(t[10]=[(0,a.Lk)("div",{class:"chartBox",id:"chart2Box"},null,-1)]))),_:1})])),_:1}),(0,a.Lk)("div",b,[(0,a.bF)(i,null,{default:(0,a.k6)((()=>[(0,a.bF)(d,{onClick:t[0]||(t[0]=e=>(0,u.i9)(y)?y.value=(0,u.R1)(m):y=(0,u.R1)(m)),type:"primary",plain:"",size:"small"},{default:(0,a.k6)((()=>t[11]||(t[11]=[(0,a.eW)("所有bug")]))),_:1}),(0,a.bF)(c,{value:h.value.length,hidden:0===h.value.length,class:"item",max:99,style:{margin:"0 10px"}},{default:(0,a.k6)((()=>[(0,a.bF)(d,{onClick:t[1]||(t[1]=e=>(0,u.i9)(y)?y.value=h.value:y=h.value),type:"danger",plain:"",size:"small"},{default:(0,a.k6)((()=>t[12]||(t[12]=[(0,a.eW)("未处理bug")]))),_:1})])),_:1},8,["value","hidden"]),(0,a.bF)(d,{onClick:t[2]||(t[2]=e=>(0,u.i9)(y)?y.value=w.value:y=w.value),type:"warning",plain:"",size:"small"},{default:(0,a.k6)((()=>t[13]||(t[13]=[(0,a.eW)("处理中bug")]))),_:1}),(0,a.bF)(d,{onClick:t[3]||(t[3]=e=>(0,u.i9)(y)?y.value=W.value:y=W.value),type:"success",plain:"",size:"small"},{default:(0,a.k6)((()=>t[14]||(t[14]=[(0,a.eW)("处理完bug")]))),_:1}),(0,a.bF)(d,{onClick:t[4]||(t[4]=e=>(0,u.i9)(y)?y.value=L.value:y=L.value),type:"info",plain:"",size:"small"},{default:(0,a.k6)((()=>t[15]||(t[15]=[(0,a.eW)("无效bug")]))),_:1})])),_:1}),(0,a.bF)(E,{data:(0,u.R1)(y),style:{width:"100%"},size:"small",border:""},{default:(0,a.k6)((()=>[(0,a.bF)(F,{label:"提交时间","min-width":"120","show-overflow-tooltip":""},{default:(0,a.k6)((e=>[(0,a.Lk)("span",null,(0,s.v_)((0,u.R1)(n.A).rTime(e.row.create_time)),1)])),_:1}),(0,a.bF)(F,{"show-overflow-tooltip":"",prop:"desc",label:"bug描述","min-width":"120"}),(0,a.bF)(F,{"show-overflow-tooltip":"",prop:"interface_url",label:"所属接口","min-width":"00"}),(0,a.bF)(F,{prop:"status",label:"bug状态","min-width":"80"}),(0,a.bF)(F,{"min-width":"180"},{default:(0,a.k6)((e=>[(0,a.Lk)("div",p,[(0,a.bF)(C,{class:"item",effect:"dark",content:"查看bug详情",placement:"top"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{icon:"View",onClick:l=>B(e.row),size:"small",type:"primary",plain:""},null,8,["onClick"])])),_:2},1024),(0,a.bF)(C,{class:"item",effect:"dark",content:"修改bug状态",placement:"top"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{icon:"Edit",onClick:t=>{l.updateBugDlg=!0,l.updateBugForm=e.row},size:"small",type:"primary",plain:""},null,8,["onClick"])])),_:2},1024)])])),_:1})])),_:1},8,["data"])])]),(0,a.bF)(D,{modelValue:l.showBug,"onUpdate:modelValue":t[5]||(t[5]=e=>l.showBug=e),"with-header":!1,size:"50%"},{default:(0,a.k6)((()=>[(0,a.bF)(K,{height:"calc(100vh - 20px)"},{default:(0,a.k6)((()=>[(0,a.bF)(A,null,{default:(0,a.k6)((()=>[t[17]||(t[17]=(0,a.Lk)("b",null,"bug信息",-1)),(0,a.Lk)("div",_,[(0,a.bF)(V,{column:4,direction:"vertical",border:""},{default:(0,a.k6)((()=>[(0,a.bF)(x,{label:"提交者"},{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(l.bugInfo.user),1)])),_:1}),(0,a.bF)(x,{label:"bug状态"},{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(l.bugInfo.status),1)])),_:1}),(0,a.bF)(x,{label:"所属接口"},{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(l.bugInfo.interface_url),1)])),_:1}),(0,a.bF)(x,{label:"提交时间"},{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)((0,u.R1)(n.A).rTime(l.bugInfo.create_time)),1)])),_:1})])),_:1})])])),_:1}),l.bugLogs.info.url?((0,a.uX)(),(0,a.Wv)(A,{key:0,style:{margin:"5px 0","min-height":"400px"}},{default:(0,a.k6)((()=>[t[18]||(t[18]=(0,a.Lk)("b",null,"用例执行信息",-1)),(0,a.Lk)("div",k,[(0,a.bF)(r.A,{result:l.bugLogs.info,hideBtn:!0},null,8,["result"])])])),_:1})):(0,a.Q3)("",!0),l.bugLogs?((0,a.uX)(),(0,a.Wv)(A,{key:1,style:{"min-height":"400px"}},{default:(0,a.k6)((()=>[t[19]||(t[19]=(0,a.Lk)("b",null,"bug处理记录",-1)),(0,a.Lk)("div",v,[(0,a.bF)(z,null,{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.bugLogs.handle,((e,l)=>((0,a.uX)(),(0,a.Wv)(R,{key:l,timestamp:(0,u.R1)(n.A).rDate(e.create_time),placement:"top"},{default:(0,a.k6)((()=>[(0,a.bF)(A,null,{default:(0,a.k6)((()=>[(0,a.Lk)("h4",null,(0,s.v_)(e.handle),1),(0,a.Lk)("p",null,(0,s.v_)(e.update_user)+"操作于 "+(0,s.v_)((0,u.R1)(n.A).rTime(e.create_time)),1)])),_:2},1024)])),_:2},1032,["timestamp"])))),128))])),_:1})])])),_:1})):((0,a.uX)(),(0,a.Wv)(I,{key:2,description:"无","image-size":400}))])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)(N,{title:"修改bug状态",modelValue:l.updateBugDlg,"onUpdate:modelValue":t[8]||(t[8]=e=>l.updateBugDlg=e),width:"30%"},{footer:(0,a.k6)((()=>[(0,a.Lk)("div",f,[(0,a.bF)(d,{size:"small",onClick:t[7]||(t[7]=e=>l.updateBugDlg=!1)},{default:(0,a.k6)((()=>t[20]||(t[20]=[(0,a.eW)("取 消")]))),_:1}),(0,a.bF)(d,{size:"small",type:"success",onClick:X},{default:(0,a.k6)((()=>t[21]||(t[21]=[(0,a.eW)("确 定")]))),_:1})])])),default:(0,a.k6)((()=>[(0,a.bF)(S,{model:l.updateBugForm},{default:(0,a.k6)((()=>[(0,a.bF)(q,{label:"bug状态"},{default:(0,a.k6)((()=>[(0,a.bF)(U,{style:{width:"100%"},modelValue:l.updateBugForm.status,"onUpdate:modelValue":t[6]||(t[6]=e=>l.updateBugForm.status=e),placeholder:"请选择bug状态"},{default:(0,a.k6)((()=>[(0,a.bF)(T,{label:"未处理",value:"未处理"}),(0,a.bF)(T,{label:"处理中",value:"处理中"}),(0,a.bF)(T,{label:"处理完",value:"处理完"}),(0,a.bF)(T,{label:"无效bug",value:"无效bug"})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])],64)}}},y=t(1241);const F=(0,y.A)(m,[["__scopeId","data-v-649ecec4"]]);var h=F}}]);
//# sourceMappingURL=409.5a2de718.js.map