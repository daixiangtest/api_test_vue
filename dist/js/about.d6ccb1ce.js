"use strict";(self["webpackChunkapi_test_vue"]=self["webpackChunkapi_test_vue"]||[]).push([[594],{2213:function(e,l,t){t.d(l,{A:function(){return w}});var a=t(6768),s=t(4232),u=t(5130),r=t(144),n=t(3923);const o={class:"icon-ele"},d={class:"icon-ele"},c={class:"icon-ele"},i={style:{"overflow-x":"auto"}},_={key:0,style:{color:"green"}},p={key:1,style:{color:"brown"}},k={key:2},b={key:0,style:{color:"green"}},v={key:1,style:{color:"slategray"}},f={key:2,style:{color:"yellow"}},y={key:3,style:{color:"brown"}},F={key:4},m={key:0,style:{"margin-top":"10px",width:"100%","text-align":"center"}},g={class:"dialog-footer"};var h={__name:"ResultView",props:{result:{},hideBtn:!1},setup(e){const l=e,t=(0,r.KR)(!1),h=(0,r.Kh)({project:null,interface:null,desc:"",info:"",status:"未处理"});async function W(){h.project=proStores.pro.id,h.info=l.result;const e=await api.addBug(h);201===e.status&&(ElNotification({type:"success",title:"bug提交成功",duration:1e3}),t.value=!1)}return(l,r)=>{const C=(0,a.g2)("el-tab-pane"),w=(0,a.g2)("el-tag"),X=(0,a.g2)("el-collapse-item"),E=(0,a.g2)("el-collapse"),L=(0,a.g2)("el-tabs"),x=(0,a.g2)("el-button"),A=(0,a.g2)("el-option"),S=(0,a.g2)("el-select"),V=(0,a.g2)("el-form-item"),R=(0,a.g2)("el-input"),z=(0,a.g2)("el-form"),K=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(L,{type:"border-card"},{default:(0,a.k6)((()=>[(0,a.bF)(C,{label:"响应体"},{default:(0,a.k6)((()=>[(0,a.bF)(n.A,{modelValue:e.result.response_body,"onUpdate:modelValue":r[0]||(r[0]=l=>e.result.response_body=l),height:"200px",lang:"json",readOnly:"True"},null,8,["modelValue"])])),_:1}),(0,a.bF)(C,{label:"响应头"},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.result.response_header,((e,l)=>((0,a.uX)(),(0,a.CE)("div",null,[(0,a.bF)(w,{type:"primary"},{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(l),1)])),_:2},1024),r[6]||(r[6]=(0,a.Lk)("span",null,":",-1)),(0,a.bF)(w,{type:"success"},{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(e),1)])),_:2},1024)])))),256))])),_:1}),(0,a.bF)(C,{label:"请求信息"},{default:(0,a.k6)((()=>[(0,a.bF)(E,null,{default:(0,a.k6)((()=>[(0,a.bF)(X,{title:"General",name:"1"},{icon:(0,a.k6)((({isActive:e})=>[(0,a.Lk)("span",o,(0,s.v_)(e?"关闭":"展开"),1)])),default:(0,a.k6)((()=>[(0,a.Lk)("div",null,[(0,a.bF)(w,{type:"success"},{default:(0,a.k6)((()=>r[7]||(r[7]=[(0,a.eW)("RequestMethod: ")]))),_:1}),(0,a.bF)(w,{type:"danger"},{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(e.result.method),1)])),_:1})]),(0,a.Lk)("div",null,[(0,a.bF)(w,{type:"success"},{default:(0,a.k6)((()=>r[8]||(r[8]=[(0,a.eW)("RequestUrl: ")]))),_:1}),(0,a.bF)(w,{type:"danger"},{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(e.result.url),1)])),_:1})])])),_:1}),(0,a.bF)(X,{title:"Request Header",name:"2"},{icon:(0,a.k6)((({isActive:e})=>[(0,a.Lk)("span",d,(0,s.v_)(e?"关闭":"展开"),1)])),default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.result.response_header,((e,l)=>((0,a.uX)(),(0,a.CE)("div",null,[(0,a.bF)(w,{type:"success"},{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(l)+": ",1)])),_:2},1024),(0,a.bF)(w,{type:"danger"},{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(e),1)])),_:2},1024)])))),256))])),_:1}),(0,a.bF)(X,{title:"Request Body",name:"3"},{icon:(0,a.k6)((({isActive:e})=>[(0,a.Lk)("span",c,(0,s.v_)(e?"关闭":"展开"),1)])),default:(0,a.k6)((()=>[(0,a.Lk)("div",null,[(0,a.bF)(w,{type:"danger"},{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(e.result.requests_body),1)])),_:1})])])),_:1})])),_:1})])),_:1}),(0,a.bF)(C,{label:"日志"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",i,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.result.log_data,(e=>((0,a.uX)(),(0,a.CE)("div",null,["INFO"===e[0]?((0,a.uX)(),(0,a.Wv)(w,{key:0,type:"success"},{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(e[0])+":"+(0,s.v_)(e[1]),1)])),_:2},1024)):"DEBUG"===e[0]?((0,a.uX)(),(0,a.Wv)(w,{key:1,type:"info"},{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(e[0])+":"+(0,s.v_)(e[1]),1)])),_:2},1024)):"ERROR"===e[0]?((0,a.uX)(),(0,a.Wv)(w,{key:2,type:"danger"},{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(e[0])+":"+(0,s.v_)(e[1]),1)])),_:2},1024)):((0,a.uX)(),(0,a.Wv)(w,{key:3,type:"warning"},{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(e[0])+":"+(0,s.v_)(e[1]),1)])),_:2},1024))])))),256))])])),_:1}),(0,a.bF)(C,{disabled:""},{label:(0,a.k6)((()=>["成功"===e.result.state?((0,a.uX)(),(0,a.CE)("span",_,"Assert:"+(0,s.v_)(e.result.state),1)):"错误"===e.result.state?((0,a.uX)(),(0,a.CE)("span",p,"Assert:"+(0,s.v_)(e.result.state),1)):((0,a.uX)(),(0,a.CE)("span",k,"Assert:"+(0,s.v_)(e.result.state),1))])),_:1}),(0,a.bF)(C,{disabled:""},{label:(0,a.k6)((()=>[200<=e.result.status_cede&&e.result.status_cede<300?((0,a.uX)(),(0,a.CE)("span",b,"code:"+(0,s.v_)(e.result.status_cede),1)):300<=e.result.status_cede&&e.result.status_cede<400?((0,a.uX)(),(0,a.CE)("span",v,"code:"+(0,s.v_)(e.result.status_cede),1)):400<=e.result.status_cede&&e.result.status_cede<500?((0,a.uX)(),(0,a.CE)("span",f,"code:"+(0,s.v_)(e.result.status_cede),1)):500<=e.result.status_cede&&e.result.status_cede<600?((0,a.uX)(),(0,a.CE)("span",y,"code:"+(0,s.v_)(e.result.status_cede),1)):((0,a.uX)(),(0,a.CE)("span",F,"code:"+(0,s.v_)(e.result.status_cede),1))])),_:1}),(0,a.bF)(C,{disabled:""},{label:(0,a.k6)((()=>[(0,a.eW)(" Time:"+(0,s.v_)(e.result.run_time),1)])),_:1})])),_:1}),"失败"===e.result.state?((0,a.uX)(),(0,a.CE)("div",m,[(0,a.bo)((0,a.bF)(x,{onClick:r[1]||(r[1]=e=>t.value=!0),plain:"",size:"small"},{default:(0,a.k6)((()=>[(0,a.eW)("提交bug"+(0,s.v_)(l.showbBtn),1)])),_:1},512),[[u.aG,!e.hideBtn]])])):(0,a.Q3)("",!0),(0,a.bF)(K,{title:"提交bug",modelValue:t.value,"onUpdate:modelValue":r[5]||(r[5]=e=>t.value=e),width:"30%"},{footer:(0,a.k6)((()=>[(0,a.Lk)("div",g,[(0,a.bF)(x,{size:"small",onClick:r[4]||(r[4]=e=>t.value=!1)},{default:(0,a.k6)((()=>r[9]||(r[9]=[(0,a.eW)("取 消")]))),_:1}),(0,a.bF)(x,{size:"small",type:"primary",plain:"",onClick:W},{default:(0,a.k6)((()=>r[10]||(r[10]=[(0,a.eW)("确 定")]))),_:1})])])),default:(0,a.k6)((()=>[(0,a.bF)(z,{model:h},{default:(0,a.k6)((()=>[(0,a.bF)(V,{label:"所属接口"},{default:(0,a.k6)((()=>[(0,a.bF)(S,{size:"small",modelValue:h.interface,"onUpdate:modelValue":r[2]||(r[2]=e=>h.interface=e),placeholder:"bug对应的接口",style:{width:"100%"}},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.interfaces,(e=>((0,a.uX)(),(0,a.Wv)(A,{label:e.name+" "+e.url,value:e.id,key:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,a.bF)(V,{label:"bug描述"},{default:(0,a.k6)((()=>[(0,a.bF)(R,{autosize:{minRows:3,maxRows:4},modelValue:h.desc,"onUpdate:modelValue":r[3]||(r[3]=e=>h.desc=e),type:"textarea",autocomplete:"off"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])],64)}}},W=t(1241);const C=(0,W.A)(h,[["__scopeId","data-v-520d49ff"]]);var w=C},2304:function(e,l,t){t.r(l),t.d(l,{default:function(){return h}});var a=t(6768),s=t(4232),u=t(144),r=t(37),n=t(2213),o=t(5710),d=t(1552),c=t(1387);const i={style:{margin:"5px"}},_={class:"right_box"},p={key:0,class:"title"},k={key:1,class:"title",style:{color:"coral"}},b={key:2,class:"title",style:{color:"red"}},v={key:0,style:{color:"#00AA7F"}},f={key:1,style:{color:"#ffaa00"}},y={key:2,style:{color:"#F56C6C"}};var F={__name:"reportView",setup(e){const l=(0,c.lq)(),t=(0,u.Kh)({record:null,report:null,showScentDatas:null});async function F(e){var l=await d.A.getTestReport(e);200===l.status&&(t.report=l.data.info,t.showScentDatas={...t.report.results})}async function m(e){var l=await d.A.getTestRecord(e);200===l.status&&(t.record=l.data)}function g(){const e=[t.report.all,t.report.success,t.report.fail,t.report.error],l=["用例总数","通过用例","失败用例","错误用例"],a=document.querySelector("#chart11");r.A.chart1(a,e,l)}function h(){const e=[{value:t.report.success,name:"通过"},{value:t.report.fail,name:"失败"},{value:t.report.error,name:"错误"}],l=document.querySelector("#chart22");r.A.chart2(l,e)}const W=(0,a.EW)((()=>t.report.results.filter((function(e,l,t){return"success"===e.state})))),C=(0,a.EW)((()=>t.report.results.filter((function(e,l,t){return"fail"===e.state})))),w=(0,a.EW)((()=>t.report.results.filter((function(e,l,t){return"error"===e.state}))));return(0,a.sV)((()=>{const e=l.params.id;F(e),m(e)})),(0,a.$u)((()=>{document.querySelector("#chart11")&&g(),document.querySelector("#chart22")&&h()})),(e,l)=>{const r=(0,a.g2)("el-descriptions-item"),d=(0,a.g2)("el-descriptions"),c=(0,a.g2)("el-card"),F=(0,a.g2)("el-col"),m=(0,a.g2)("el-row"),g=(0,a.g2)("el-button"),h=(0,a.g2)("el-scrollbar"),X=(0,a.g2)("el-table-column"),E=(0,a.g2)("el-table");return t.report?((0,a.uX)(),(0,a.Wv)(m,{key:0},{default:(0,a.k6)((()=>[(0,a.bF)(F,{span:12},{default:(0,a.k6)((()=>[(0,a.bF)(h,{height:"calc(100vh - 65px)"},{default:(0,a.k6)((()=>[t.record?((0,a.uX)(),(0,a.Wv)(c,{key:0},{default:(0,a.k6)((()=>[l[4]||(l[4]=(0,a.Lk)("div",{class:"report_title"},[(0,a.Lk)("i",{class:"el-icon-s-marketing"}),(0,a.eW)(" 测试报告 ")],-1)),(0,a.bF)(d,{column:5,border:"",title:"执行信息",direction:"vertical"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{label:"执行时间"},{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)((0,u.R1)(o.A).rTime(t.record.create_time)),1)])),_:1}),(0,a.bF)(r,{label:"执行任务"},{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(t.record.task),1)])),_:1}),(0,a.bF)(r,{label:"测试环境"},{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(t.record.env),1)])),_:1}),(0,a.bF)(r,{label:"通过率"},{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(100*t.record.pass_rate+"%"),1)])),_:1})])),_:1})])),_:1})):(0,a.Q3)("",!0),(0,a.bF)(c,{"body-style":"padding:5px"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{gutter:5},{default:(0,a.k6)((()=>[(0,a.bF)(F,{span:14},{default:(0,a.k6)((()=>l[5]||(l[5]=[(0,a.Lk)("div",{class:"chartBox",id:"chart11"},null,-1)]))),_:1}),(0,a.bF)(F,{span:10},{default:(0,a.k6)((()=>l[6]||(l[6]=[(0,a.Lk)("div",{class:"chartBox",id:"chart22"},null,-1)]))),_:1})])),_:1})])),_:1}),(0,a.bF)(c,null,{default:(0,a.k6)((()=>[(0,a.bF)(d,{column:4,border:"",title:"测试业务流统计",direction:"vertical"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{label:"业务流总数"},{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(t.report.results.length),1)])),_:1}),(0,a.bF)(r,{label:"通过业务流"},{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(W.value.length),1)])),_:1}),(0,a.bF)(r,{label:"失败业务流"},{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(C.value.length),1)])),_:1}),(0,a.bF)(r,{label:"错误业务流"},{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(w.value.length),1)])),_:1})])),_:1})])),_:1}),(0,a.bF)(c,null,{default:(0,a.k6)((()=>[l[7]||(l[7]=(0,a.Lk)("b",{style:{"line-height":"30px"}},"未通过业务流",-1)),(0,a.Lk)("div",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(w.value,(l=>((0,a.uX)(),(0,a.Wv)(g,{plain:"",size:"small",onClick:t=>e.showScentDatas=[l],type:"danger"},{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(l.name),1)])),_:2},1032,["onClick"])))),256)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(C.value,(l=>((0,a.uX)(),(0,a.Wv)(g,{plain:"",size:"small",onClick:t=>e.showScentDatas=[l],type:"warning"},{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(l.name),1)])),_:2},1032,["onClick"])))),256))])])),_:1}),(0,a.bF)(c,null,{default:(0,a.k6)((()=>[l[8]||(l[8]=(0,a.Lk)("b",{style:{"line-height":"30px"}},"通过业务流",-1)),(0,a.Lk)("div",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(W.value,(l=>((0,a.uX)(),(0,a.Wv)(g,{plain:"",size:"small",onClick:t=>e.showScentDatas=[l],type:"success"},{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(l.name),1)])),_:2},1032,["onClick"])))),256))])])),_:1})])),_:1})])),_:1}),(0,a.bF)(F,{span:12},{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,[(0,a.Lk)("div",i,[(0,a.bF)(g,{size:"small",type:"primary",plain:"",onClick:l[0]||(l[0]=e=>t.showScentDatas={...t.report.results})},{default:(0,a.k6)((()=>l[9]||(l[9]=[(0,a.eW)("所有业务流")]))),_:1}),(0,a.bF)(g,{size:"small",type:"success",plain:"",onClick:l[1]||(l[1]=e=>t.showScentDatas=W.value)},{default:(0,a.k6)((()=>l[10]||(l[10]=[(0,a.eW)("成功业务流")]))),_:1}),(0,a.bF)(g,{size:"small",type:"warning",plain:"",onClick:l[2]||(l[2]=e=>t.showScentDatas=C.value)},{default:(0,a.k6)((()=>l[11]||(l[11]=[(0,a.eW)("失败业务流")]))),_:1}),(0,a.bF)(g,{size:"small",type:"danger",plain:"",onClick:l[3]||(l[3]=e=>t.showScentDatas=w.value)},{default:(0,a.k6)((()=>l[12]||(l[12]=[(0,a.eW)("错误业务流")]))),_:1})]),(0,a.bF)(h,{height:"calc(100vh - 117px)"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",_,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t.showScentDatas,((e,t)=>((0,a.uX)(),(0,a.Wv)(c,{key:t},{default:(0,a.k6)((()=>["success"==e.state?((0,a.uX)(),(0,a.CE)("div",p,[l[13]||(l[13]=(0,a.Lk)("i",{class:"el-icon-upload"},null,-1)),(0,a.eW)(" "+(0,s.v_)("测试业务流 : "+e.name+"【通过】"),1)])):"fail"==e.state?((0,a.uX)(),(0,a.CE)("div",k,[l[14]||(l[14]=(0,a.Lk)("i",{class:"el-icon-upload"},null,-1)),(0,a.eW)(" "+(0,s.v_)("测试业务流 : "+e.name+"【失败】"),1)])):((0,a.uX)(),(0,a.CE)("div",b,[l[15]||(l[15]=(0,a.Lk)("i",{class:"el-icon-upload"},null,-1)),(0,a.eW)(" "+(0,s.v_)("测试业务流 : "+e.name+"【错误】"),1)])),(0,a.bF)(E,{data:e.cases,style:{width:"100%"},class:"result","show-header":!1},{default:(0,a.k6)((()=>[(0,a.bF)(X,{type:"expand"},{default:(0,a.k6)((e=>[(0,a.bF)(n.A,{result:e.row},null,8,["result"])])),_:1}),(0,a.bF)(X,{"show-overflow-tooltip":!0,label:"用例名称",prop:"name","min-width":"100px"}),(0,a.bF)(X,{label:"请求方法",prop:"method","min-width":"40px"}),(0,a.bF)(X,{label:"状态码",prop:"status_cede","min-width":"40px"}),(0,a.bF)(X,{label:"断言结果",prop:"state","min-width":"40px"},{default:(0,a.k6)((e=>["成功"==e.row.state?((0,a.uX)(),(0,a.CE)("span",v,"成功")):"失败"==e.row.state?((0,a.uX)(),(0,a.CE)("span",f,"失败")):((0,a.uX)(),(0,a.CE)("span",y,"错误"))])),_:1})])),_:2},1032,["data"])])),_:2},1024)))),128))])])),_:1})])])),_:1})])),_:1})):(0,a.Q3)("",!0)}}},m=t(1241);const g=(0,m.A)(F,[["__scopeId","data-v-47458821"]]);var h=g}}]);
//# sourceMappingURL=about.d6ccb1ce.js.map